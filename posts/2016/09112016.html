<!DOCTYPE html>
<html>
<!-- Hack to Learn, Don't Learn to hack. -->
<!-- Created with all the love in the wereld || Mundo || World by Alexandre Juca -->
<!-- Site Generated by HoloPyEngine created by Alexandre Juca -->
<head>
	<title> Matando bots com solicitações HTTP </title>


	<meta charset='utf-8'></meta>
	 <meta content="Alexandre Juca" property="og:title">
    <meta content="Alexandre Juca" name="twitter:title">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="Software developer, Web Developer Alexandre Juca" property="og:site_name">
    <meta content="Matando bots com solicitações HTTP" name="description">
    <meta content="Matando bots com solicitações HTTP" property="og:description">
    <meta content="Matando bots com solicitações HTTP" name="twitter:description">
    <meta name="Author" content="Alexandre Juca" />

    <!-- Polymer -->
    <script src="../../bower_components/webcomponentsjs/webcomponents.js"></script>
	<link rel="import"
  href="../../bower_components/floating-button.html">
   <!-- Polymer -->

    <!-- Stylesheets -->
	<link rel='stylesheet' href='../../assets/css/nintendo-min.css' type='text/css'>
	<link rel='stylesheet' href='../../assets/css/animate-min.css' type='text/css'>
	<!-- End of Stylesheets -->

	<!-- Fonts -->
	
	<link href="https://fonts.googleapis.com/css?family=Amiko" rel="stylesheet"> 
	<link href='http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz:400,300,700' rel='stylesheet' type='text/css'>
	<!-- End of Fonts -->
    
    

    
	<!-- FontAwesome -->
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
	<!-- FontAwesome -->
        <link rel='stylesheet' href='../../assets/css/style-a-min.css' type='text/css'>
        <link rel='stylesheet' href='../../assets/css/console-min.css' type='text/css'>
<body class='body'>
	<!-- Facebook crap -->
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '1563929520491346',
      xfbml      : true,
      version    : 'v2.2'
    });
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>
<!-- Facebook crap -->
	<nav class='navbar navbar-fixed-top'>
		<div class='profile-nav'><img id='nav-profile' class='img-circle' src='../../assets/img/AJ-32.jpg'></div>
		<!-- SOCIAL LINKS -->
		<div class='social-box'>
			<ul class='social-links-holder'>
				<li><a class='social-links-b' href='http://github.com/AlexJuca'><i class="fa fa-github social-icon"></i></a></li>
				<li><a class='social-links-b' href='http://twitter.com/Ajxdev'><i class="fa fa-twitter social-icon"></i></a></li>
				<li><a class='social-links-b' href='http://facebook.com/Alexandre.Juca'><i class="fa fa-facebook social-icon"></i></a></li>
				<li><a class='social-links-b' href='https://plus.google.com/u/0/101379969000403855022/posts'><i class="fa fa-google-plus social-icon"></i></a></li>
			</ul>
		</div>
		<!-- END OF SOCIAL LINKS -->
	</nav>
	<!-- MAIN SECTION -->
	<!-- INTRO SECTION -->
	<div id='hi' class='intro-wrapper'>
		<div class='intro-box'>
			<h1 class='header-white'> Hi! </h1>
			<div class='lightline'></div>
			<div class='intro-to-me'>
				<a href='../../'><img class='animated bounceInDown my-profile img-circle' src='../../assets/img/AJ.jpg'></img></a>
				<h3 class='my-title animated bounceInLeft'>I'm Alexandre Juca </h3>
				<h3 class='my-title'>a Multiplatform Software Developer</h3>
			</div>
			<p> I am the founder & CTO of <a class='beezond-link' href='http://www.bitfyr.com'>BitFyr</a>. I am passionate about building useful things that affect peoples lives, teaching programming, computer science and building a more open web. This is where you'll find out about my thoughts, projects and evil plans to take over the world. #StayTuned</p>
		</div>

	</div>

	<!-- END INTRO SECTION -->
	<div id='post-section' class='main-section'>
		<div class='intro-box-blog'>
			<h1 class='newsTitle'>Matando bots com solicitações HTTP</h1>
			<h3> 9 de Dezembro de 2016 </h3>

			<img class='blog-img-header' src='../../assets/img/roboto.gif'></img>
			<floating-button id='share'></floating-button>

			<article class='post-content'>
					<p> Bots estão a receber cada vez mais hype no mundo, especialmente entre desenvolvidores! Não sei bem 
						se há muita gente aqui em Angola criando bots mas já se perguntou se eles são realmente seguros? Quais são 
						as vulnerabilidades comuns entre as frameworks mais utlilizadas para desenvolvimento de bots? </p>

					 <h2> Como funcionam os facebook bots? </h2>

					 <p> Cada vez que você envia uma mensagem para o chat, o facebook
						 cria uma solicitação HTTP para o seu web app. Esta solicitação HTTP (POST) contêm a sua mensagem. 
						 Aqui esta um exemplo. </p>

						 <script src="https://gist.github.com/davidmann4/3b71bbc97b15d5d4f7550dba94272276.js"></script>

					<p> após receber a mensagem o bot pode fazer pedidos externos para serviços com
						 wit.ai ou api.ai para usar recursos como NLP 
						(processamento de linguagem natural) e daí gerar uma resposta e enviar para o facebook.
						Facebook envia a resposta atraves do messenger. </p>

						<img class='blog-img-header' src='../../assets/img/bots-process.png'></img>

					<h2> O Problema </h2>

					<p> Se o teu bot esta usar imagens ou webviews poderá usar a ferramenta de inspecção
						do chrome e facilmente identificar o url do servidor que esta hospeder o seu web app. A maioria das
						libs usam /webhook como url para comunicar com facebook. Se encontrares o webhook podes finjir ser 
						o facebook porque muitas das libs usam uma implementação errada do X-HUB Signature Header. </p>

						<img class='blog-img-header' src='../../assets/img/xhub.png'></img>
						
					<h2> O Ataque </h2>
					<p> é possivel enviar spam para o webhook com mensagens falsificadas, que possibilitará você a ver informações como 
					o seu 'user id'. Isso possibilitará enviar grandes quantidades de mensagens atraves do bot para uma conta do facebook.  </p>

					<p> Nota que a mensagem json acima é do tipo array e que é possivel você  enviar
						várias mensagens como um único payload. O padrão para o tamanho máximo de envio para 
						expressJS é 100 KB, que é equivalente a 600 mensagens. Isto é um problema: Poderá enviar
						uma solicitação de 100KB e emitir 600 solicitações do seu bot para o facebook e talvez outros 600 
						para servidores de terceiros. A maioria dos API's usam uma limitação de 1 solicitação / por segundo. 
						Isto significa um pedido pode manter seu bot ocupado durante 10-20 minutos. 

					</p>


					
					<h2> Prova de conceito </h2>
					<p> O David Mann, o homem responsável pela descoberta criou um <a target='blank_' href='https://github.com/davidmann4/msf-fb-messenger-bot-dos'>modulo</a> para metasploit para testares os teus bots. 

					<div style='position:relative; padding-bottom:54%'><iframe src='https://gfycat.com/ifr/CheerfulPracticalAgouti?referrer=https%3A%2F%2Fchatbotsmagazine.com%2Fmedia%2F69234978f86e7b4c9d9974fc3235b596%3FpostId%3Dca7eb57c2ad1' frameborder='0' scrolling='no' width='100%' height='100%' style='position:absolute;top:0;left:0;' allowfullscreen></iframe></div>
					<br> </br>
					<p> Estas a desenvolver bots? Segurança é importante para ti? Quais são as políticas de segurança que estas a usar?  </p>

                    <p> 
                    </p>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
				<!-- Twitter share -->

				<div class='seperator'></div>




				    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'alexjucagithubcom'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>





			</article>



		</div>

	</div>

<!-- SCROLL JS Section -->
<ul class='post-read'>
		<li id='drop-to-post'> Ler Postagem: <i class="fa fa-chevron-down post-read-icon"></i></li>
</ul>
<!-- END OF SCROLL JS Section -->


<footer class='footer'>
<ul class='social-links'>
	<h5> &copy; Copyright Alexandre Juca All Rights Reserved </h5>
	<p style="color: #404040; font-size: 15px;"> Designed and Developed with <i class="fa fa-heart social-links-a"></i> by Alexandre Juca </p>
		<li><a class='social-links-a' _target='blank' href='http://github.com/AlexJuca'><i class="fa fa-github social-icon"></i></a></li>
		<li><a class='social-links-a' href='http://twitter.com/Ajxdev'><i class="fa fa-twitter social-icon"></i></a></li>
		<li><a class='social-links-a' href='http://facebook.com/Alexandre.Juca'><i class="fa fa-facebook social-icon"></i></a></li>
		<li><a class='social-links-a' href='https://plus.google.com/u/0/101379969000403855022/posts'><i class="fa fa-google-plus social-icon"></i></a></li>
	</ul>
</footer>
<!-- FOOTER SECTION -->
<!-- JQuery -->
    <script src='../../assets/js/jquery-2.1.1.min.js'></script>
    <!-- JQuery -->
<script src='../../assets/js/jquery.scrollTo.min.js'></script>
<script src='../../assets/js/jgo-min.js'></script>
<script src='../../assets/js/jpost-min.js'></script>
<script src='../../assets/js/wintracker-min.js'></script>
<script src='../../assets/js/navnav.js'></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61044942-1', 'auto');
  ga('send', 'pageview');

</script>

 <script type="text/javascript">

	$(document).ready(function()
	{
			$("#share").click(function()
			{

				var url = document.URL;
				FB.ui({
				  method: 'share',
				  href: url,
				}, function(response){});

			});
	});

</script>
<!-- Site Generated by HoloPyEngine created by Alexandre Juca -->
</body>
</html>
